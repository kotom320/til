---

title: "Git 커밋 취소: reset vs revert 정리"
date: "2025-08-04"
tags: ["Git", "Commit", "Reset", "Revert"]
summary: "잘못된 커밋을 로컬에서 되돌리는 방법, 이미 푸시된 커밋을 reset 혹은 revert하는 방법과 두 명령의 차이점을 정리합니다."
-----------------------------------------------------------------------------------

## 배경

* 실수로 잘못된 변경사항을 커밋했을 때 복구 방법이 필요함
* 로컬에서만 커밋했을 때와, 이미 원격에 push까지 마친 경우 처리 방식이 다름
* `git reset`과 `git revert`의 동작 차이를 이해하고, 상황에 맞게 선택해야 함

## 1. 로컬 커밋 취소 (아직 푸시 전)

### 1.1 마지막 커밋만 취소하되, 스테이징(stage)은 유지

```bash
git reset --soft HEAD~1
```

* 최근 커밋을 지우고 워킹 디렉토리·인덱스(staging area)는 그대로 유지

### 1.2 마지막 커밋 취소 후 스테이지 해제

```bash
git reset HEAD~1
```

* 커밋만 제거하고, 변경사항은 워킹 디렉토리에 남기되 staged 상태 해제

### 1.3 워킹 디렉토리까지 완전히 초기화

```bash
git reset --hard HEAD~1
```

* 커밋, 인덱스, 워킹 디렉토리의 모든 변경사항을 지정 커밋으로 되돌림
* **주의**: 데이터가 완전히 삭제되어 복구 불가

## 2. 푸시된 커밋 되돌리기: reset + force push

```bash
git reset --hard <커밋_ID>
# 커밋 히스토리를 재작성한 뒤

git push --force-with-lease
```

* `--force-with-lease`: 원격 브랜치를 덮어쓰기 전에 **내 로컬 브랜치가 추적하는 원격 브랜치**가 다른 사람이 수정되지 않았음을 검증

  * 협업 브랜치 보호: 내 작업에만 force push 허용
  * 다른 사람이 이미 푸시한 경우 푸시 실패 → 히스토리 손실 방지

**주의**: 협업 중인 브랜치에서 force push는 신중히 사용해야 함
\*\*: 협업 중인 브랜치에 사용 시 동료의 히스토리와 충돌 발생 가능

## 3. 푸시된 커밋 안전히 취소하기: revert

```bash
git revert <커밋_ID>
# 또는 범위를 지정
# git revert <시작_커밋_ID>..<끝_커밋_ID>

git push
```

* 지정 커밋의 변경사항을 **역적용**하는 새로운 커밋을 생성
* 브랜치 히스토리를 보존하면서, 변경사항만 되돌림

## 4. reset vs revert 비교

| 특징         | reset                    | revert              |
| ---------- | ------------------------ | ------------------- |
| 커밋 히스토리 조작 | **재작성** (히스토리에서 커밋 제거)   | **보존** (새 커밋으로 역적용) |
| 원격 브랜치 영향  | `--force` 필요, 협업 중 혼란 위험 | 일반 push로 안전하게 적용    |
| 사용 권장 시점   | 개인 작업 브랜치, 실험적 되돌림       | 메인/공유 브랜치, 프로덕션 롤백  |

## 느낀 점

* **reset**은 빠르고 직관적이나, force push가 필요해 협업 브랜치에는 신중히 사용해야 함
* **revert**는 브랜치 안전성을 지키면서 롤백할 수 있어, 공동 작업 중인 브랜치나 메인 브랜치에서 우선 권장됨
* 상황에 따라 두 방법을 적절히 조합하여 Git 히스토리를 깔끔하고 안전하게 관리하자

---
